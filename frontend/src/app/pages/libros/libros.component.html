<div class="container mt-5">
  <div class="row">
    <div class="col-md-10">
      <h1>
        Libros
      </h1>
    </div>
    <div class="col-md-2">
      <div class="d-grid gap-2">
        <button class="btn btn-outline-primary" (click)="navegarACrearLibro()" *ngIf="authService.user['id_usuario'] === 1">Nuevo Libro</button>
      </div>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-lg-1"></div>
    <div class="col-lg-10">
      <table class="table">
        <thead class="table-dark">
          <tr>
            <td>
              Titulo
            </td>
            <td>
              Autor
            </td>
            <td>
              Editorial
            </td>
            <td>
              A침o de publicaci칩n
            </td>
            <td>
              Precio (Q)
            </td>
            <td>
              Disponible
            </td>
            <td>
              Acci칩n
            </td>
          </tr>
        </thead>
        <tbody *ngIf="!loading">
          <tr *ngFor="let libro of libros">
            <td>
              <a [routerLink]="['', 'libros', libro.id_libro]">
                {{ libro.titulo }}
              </a>
            </td>
            <td>
              {{ libro.autor }}
            </td>
            <td>
              {{ libro.editorial }}
            </td>
            <td>
              {{ libro["a침o_publicacion"] }}
            </td>
            <td>
              {{ libro.precio_renta | currency:'Q' }}
            </td>
            <td>
              {{ libro.estado }}
            </td>
            <td *ngIf="authService.user['id_usuario'] === 1">
              <button class="btn btn-outline-success" (click)="navegarAEditarLibro(libro.id_libro)">Editar</button>
            </td>
            <td *ngIf="authService.user['id_usuario'] !== 1">
              <button class="btn btn-outline-warning" [disabled]="libro.estado === 'Ocupado'" (click)="rentarLibro(libro)">Alquilar</button>
              <button class="btn btn-outline-success mx-2" [disabled]="libro.estado === 'Ocupado'" (click)="comprarLibro(libro.id_libro)">Comprar</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="alert alert-warning mt-3" *ngIf="error && !loading">
        Error al obtener libros.
      </div>
      <div class="alert alert-warning mt-3" *ngIf="!error && !loading && libros.length === 0">
        No se encontraron libros en el sistema.
      </div>
    </div>
    <div class="col-lg-1"></div>
  </div>
</div>